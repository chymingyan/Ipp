# Generated by Django 2.2 on 2020-10-26 07:54
import base64

from django.db import migrations


def forwards_func(apps, schema_editor):
    UserLevel = apps.get_model("inspection", "UserLevel")
    UserInfo = apps.get_model("inspection", "Users")
    db_alias = schema_editor.connection.alias
    UserLevel.objects.using(db_alias).bulk_create([
        UserLevel(levelname="超级管理员"),
        UserLevel(levelname="管理员")
    ])
    password="welcome1"
    pwd= password.encode("utf-8")
    ciphertext=base64.b64encode(pwd).decode()
    UserInfo.objects.using(db_alias).bulk_create([
        UserInfo(username="admin", password=ciphertext, repassword=ciphertext, email="admin@hthtorzion.com",
                 isenable=True, level=1),
    ])


def reverse_func(apps, schema_editor):
    UserLevel = apps.get_model("inspection", "UserLevel")
    UserInfo = apps.get_model("inspection", "Users")
    db_alias = schema_editor.connection.alias
    UserLevel.objects.using(db_alias).filter(levelname="超级管理员").delete()
    UserLevel.objects.using(db_alias).filter(levelname="管理员").delete()
    UserInfo.objects.using(db_alias).filter(username="admin").delete()


class Migration(migrations.Migration):
    dependencies = [
        ('inspection', '0001_initial'),
    ]

    operations = [
        migrations.RunPython(forwards_func, reverse_func),
    ]
